var Q=function(h,D,H,q){var j=arguments.length,B=j<3?D:q===null?q=Object.getOwnPropertyDescriptor(D,H):q,G;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")B=Reflect.decorate(h,D,H,q);else for(var J=h.length-1;J>=0;J--)if(G=h[J])B=(j<3?G(B):j>3?G(D,H,B):G(D,H))||B;return j>3&&B&&Object.defineProperty(D,H,B),B};class O{h;_cycles=[];constructor(h){this.el=h}cycle(h){let D=h();if(D instanceof Promise)D.then((H)=>this._cycles.push(H));else this._cycles.push(D)}clearCycles(){this._cycles.map((h)=>{const D=h();if(D instanceof Promise)D.then(()=>null)}),this._cycles=[]}static attach(h){const D=typeof h==="string"?document.querySelector(h):h;if(!D)throw new Error(`Element not found: ${h}`);const H=new this(D);return H.start?.(),H}static logger(...h){console.info("[NOT IMPLEMENTED]",...h)}logger(...h){console.info(`[${this.element.tagName}]`,...h)}get element(){return this.el}query(h){return this.element.querySelector(h)}}var X=function(h,D,H="ram"){const q={};let j=H==="ram"?h:B(D,h,H);function B(E,F,I){if(!E)return F;const K=(I==="local"?localStorage:sessionStorage).getItem(E);return K?JSON.parse(K):F}function G(E,F,I){if(I==="ram"||!E)return;(I==="local"?localStorage:sessionStorage).setItem(E,JSON.stringify(F))}return[()=>j,(E)=>{const F=j;j=E,G(D,E,H),Object.values(q).forEach((I)=>I(j,F))},(E)=>{const F=Math.random().toString(36).substring(2,9);return q[F]=E,E(j,j),()=>{delete q[F]}}]};function R(h){const[D,H,q]=X(h);return[D,H,q]}function Y(h,D,H,q=HTMLElement){customElements.define(h,class extends q{instance=null;observer=null;constructor(){super();if(H)this.observer=new IntersectionObserver((j)=>{j.forEach((B)=>{if(B.isIntersecting&&!this.instance)this.instance=new D(this),this.instance.start?.()})},{threshold:0.1});else this.instance=new D(this)}connectedCallback(){if(this.observer)this.observer.observe(this);else this.instance?.start?.()}disconnectedCallback(){if(this.instance?.onDestroy?.(),this.instance?.clearCycles?.(),this.observer)this.observer.disconnect()}})}function U(h){return function(D){Y(h,D,!0,HTMLElement)}}var[,Z,_]=R("John");class P extends O{constructor(){super(...arguments)}startedAt=new Date;start(){this.logger("start"),this.printDate(),this.query("input")?.addEventListener("input",(h)=>{if(h.target instanceof HTMLInputElement)Z(h.target?.value)}),this.cycle(()=>{return _((h)=>{this.query("input").value=h})}),this.cycle(async()=>{const h=setInterval(()=>{this.printDate()},1000);return()=>clearInterval(h)})}onDestroy(){this.logger("destroy")}printDate(){this.query("span").innerHTML=`(Module started at ${this.startedAt.toISOString()}) The date is: ${new Date}`}}P=Q([U("atomix-component")],P);
