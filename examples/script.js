var H=function(h,D,I,j){var q=arguments.length,S=q<3?D:j===null?j=Object.getOwnPropertyDescriptor(D,I):j,B;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")S=Reflect.decorate(h,D,I,j);else for(var E=h.length-1;E>=0;E--)if(B=h[E])S=(q<3?B(S):q>3?B(D,I,S):B(D,I))||S;return q>3&&S&&Object.defineProperty(D,I,S),S};class F{h;_hooks=[];constructor(h){this.el=h}hook(h){let D=h();if(D instanceof Promise)D.then((I)=>this._hooks.push(I));else this._hooks.push(D)}clearHooks(){this._hooks.map((h)=>{const D=h();if(D instanceof Promise)D.then(()=>null)}),this._hooks=[]}static logger(...h){console.info("[NOT IMPLEMENTED]",...h)}logger(...h){console.info(`[${this.element.tagName}]`,...h)}get element(){return this.el}query(h){return this.element.querySelector(h)}}function J(h,D="ram"){const I={};let j=q(h,D);function q($,A){switch(A){case"session":return JSON.parse(sessionStorage.getItem("hookContextValue")||JSON.stringify($));case"local":return JSON.parse(localStorage.getItem("hookContextValue")||JSON.stringify($));default:return $}}function S($,A){switch(A){case"session":sessionStorage.setItem("hookContextValue",JSON.stringify($));break;case"local":localStorage.setItem("hookContextValue",JSON.stringify($));break}}return[()=>j,($)=>{j=$,S($,D),Object.values(I).forEach((A)=>A(j))},($)=>{const A=Math.random().toString(36).substring(2,9);return I[A]=$,$(j),()=>{delete I[A]}}]}function O(h,D,I,j=HTMLElement){customElements.define(h,class extends j{instance=null;observer=null;constructor(){super();if(I)this.observer=new IntersectionObserver((q)=>{q.forEach((S)=>{if(S.isIntersecting&&!this.instance)this.instance=new D(this),this.instance.start?.()})},{threshold:0.1});else this.instance=new D(this)}connectedCallback(){if(this.observer)this.observer.observe(this);else this.instance?.start?.()}disconnectedCallback(){if(this.instance?.onDestroy?.(),this.instance?.clearHooks?.(),this.observer)this.observer.disconnect()}})}function K(h){return function(D){O(h,D,!0,HTMLElement)}}var[,P,Q]=J("John","local");class G extends F{constructor(){super(...arguments)}startedAt=new Date;start(){this.logger("start"),this.printDate(),this.query("input")?.addEventListener("input",(h)=>{if(h.target instanceof HTMLInputElement)P(h.target?.value)}),this.hook(()=>{return Q((h)=>{this.query("input").value=h})}),this.hook(async()=>{const h=setInterval(()=>{this.printDate()},1000);return()=>clearInterval(h)})}onDestroy(){this.logger("destroy")}printDate(){this.query("span").innerHTML=`(Module started at ${this.startedAt.toISOString()}) The date is: ${new Date}`}}G=H([K("atomix-component")],G);
